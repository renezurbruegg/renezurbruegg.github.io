<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>test-app documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">test-app documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>ROUTE</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/navigation/my-nav.component.ts</code>
        </p>



        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#icon">icon</a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#route">route</a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#title">title</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="icon"></a>
                                        <span class="name"><b>icon</b><a href="#icon"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>icon:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="route"></a>
                                        <span class="name"><b>route</b><a href="#route"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>route:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="title"></a>
                                        <span class="name"><b>title</b><a href="#title"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>title:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component } from &#x27;@angular/core&#x27;;
import { BreakpointObserver, Breakpoints } from &#x27;@angular/cdk/layout&#x27;;
import { Observable, timer, from } from &#x27;rxjs&#x27;;
import { map, switchMap } from &#x27;rxjs/operators&#x27;;
import { AuthenticationService } from &#x27;../_services&#x27;;
import { NavItem } from &#x27;./menu-list-item/nav-item&#x27;;
import { AppConfig } from &#x27;../_services/app.config&#x27;;
import { ToastrService } from &#x27;ngx-toastr&#x27;;
import { HttpClient } from &#x27;@angular/common/http&#x27;;
import { MatDialogRef, MatDialog } from &#x27;@angular/material&#x27;;


interface ROUTE {
  icon?: string;
  route?: string;
  title?: string;
}

/**
* The navigation component. &lt;br&gt;
* Creates a sidebar with different components and a toolbar showing battery percentage, log out button and temperature
*/
@Component({
  selector: &#x27;app-my-nav&#x27;,
  templateUrl: &#x27;./my-nav.component.html&#x27;,
  styleUrls: [&#x27;./my-nav.component.css&#x27;]
})
export class MyNavComponent {
  /**
  * List containing all items shown in the sidebar
  */
  public navItems: NavItem[] &#x3D; [
    {
      displayName: &#x27;Dashboard&#x27;,
      iconName: &#x27;dashboard&#x27;,
      route: &#x27;/dashboard&#x27;,
      loginRequired: false,
    }, {
      displayName: &#x27;Video&#x27;,
      iconName: &#x27;videocam&#x27;,
      route: &#x27;/video&#x27;,
      loginRequired: false,
    }, {
      displayName: &#x27;Settings&#x27;,
      iconName: &#x27;settings&#x27;,
      route: &#x27;/settings&#x27;,
      loginRequired: true,
      children: [{
        displayName: &#x27;Charts&#x27;,
        iconName: &#x27;show_chart&#x27;,
        route: &#x27;/chartsettings&#x27;,
        loginRequired: true,
      },
      {
        displayName: &#x27;Supply Voltages&#x27;,
        iconName: &#x27;power&#x27;,
        route: &#x27;/settings&#x27;,
        loginRequired: true,
      },
      {
        displayName: &#x27;Measurement&#x27;,
        iconName: &#x27;flash_on&#x27;,
        route: &#x27;/measDevices&#x27;,
        loginRequired: true,
      }, {
        displayName: &quot;General&quot;,
        iconName: &#x27;settings_input_antenna&#x27;,
        route: &#x27;general&#x27;,
        loginRequired: true
      },
      {
        displayName: &#x27;Editor&#x27;,
        iconName: &#x27;edit&#x27;,
        route: &#x27;/editor&#x27;,
        loginRequired: true,
      }]
    }


  ];

  /**
  * List containing all &quot;big&quot; dropdown navigation objects.
  */
  public routes: ROUTE[] &#x3D; [
    {
      icon: &#x27;dashboard&#x27;,
      route: &#x27;/dashboard&#x27;,
      title: &#x27;Dashboard&#x27;,
    },
    {
      icon: &#x27;videocam&#x27;,
      route: &#x27;/video&#x27;,
      title: &#x27;Video&#x27;,
    },
    {
      icon: &#x27;settings&#x27;,
      route: &#x27;/settings&#x27;,
      title: &#x27;Settings&#x27;,
    }
  ];



  /**
  * flag to show if user is logged or not. &lt;br&gt;
  * Used to show/hide the logout button
  */
  public loggedIn: boolean;
  /**
  * flag to store information about the sidebar.  &lt;br&gt;
  * if false, sidebar is always visible, if ture, sidebar can be hidden by pressing the toggle button
  */
  public isToggleEnabled &#x3D; false;
  /**
  * the current battery level.
  */
  public batteryLevel: any &#x3D; 0;
  /**
  * the battery icon. can be critical, loading, normal or just unknown
  */
  public batteryIcon: string &#x3D; &quot;battery_unknown&quot;;
  /**
  * Current heat of the RPI CPU
  */
  public heat: string &#x3D; &quot;&quot;

  /**
  * Observable that gets triggered if screen size changes.  &lt;br&gt;
  * True if device is handset and toggle button is shown.
  */
  public isHandset$: Observable&lt;boolean&gt; &#x3D; this.breakpointObserver.observe(Breakpoints.Handset)
    .pipe(
      map(result &#x3D;&gt; result.matches)
    );

  /**
  * Logs out the user that is currently logged in
  */
  public logout() {
    this.authenticationService.logout();
  }

  constructor(private breakpointObserver: BreakpointObserver, private dialog: MatDialog, private authenticationService: AuthenticationService, private http: HttpClient, private toastr: ToastrService) {  }

  /**
  * Shows a dialog to make sure if the user really wants to shut the device down
  */
  public shutdownDialog(): void {
    this.dialog.open(PowerOffDialog, {
      width: &#x27;400px&#x27;
    });
  }

  /**
  * On init creates a timer that polls every 10s for new information about Batterylevel, CPU tmp etc. &lt;br&gt;
  * Shows an error notification if it fails.
  */
  ngOnInit() {
    timer(0, 10000)
      .pipe(
        switchMap(() &#x3D;&gt; from(this.http.get(AppConfig.apiUrl + &quot;/getSystemInfos&quot;))),
        )
      .subscribe((data: any) &#x3D;&gt; {

        this.heat &#x3D; data.temp
        this.batteryLevel &#x3D; data.battery.value;

        let val &#x3D; parseInt(data.battery.value)
        this.batteryIcon &#x3D; &quot;battery&quot;
        if (data.charging) {
          this.batteryIcon +&#x3D; &quot;_charging&quot;
        }
        if (val &lt; 10) {
          this.batteryIcon +&#x3D; &quot;_alert&quot;
        } else {
          this.batteryIcon +&#x3D; &quot;_full&quot;
        }

      },
      response &#x3D;&gt; {
        console.log(&quot;Error while retreaving data&quot;, response);
        this.toastr.error(response, &quot;Error while getting battery data&quot;);

      }
    );
    this.loggedIn &#x3D; this.authenticationService.isLoggedIn();

    // Set up Listener to remove log out icon
    this.authenticationService.getCurrentUserObservable().subscribe(val &#x3D;&gt;
      this.loggedIn &#x3D; this.authenticationService.isLoggedIn()
    );

    this.isHandset$.subscribe(handset &#x3D;&gt; this.isToggleEnabled &#x3D; handset);
  }
}








/**
* Confirmation dialog to make sure if the user really wants to shut down device.
*/
@Component({
  selector: &#x27;app-power_off_dialog&#x27;,
  templateUrl: &#x27;./power_off_dialog.component.html&#x27;,
})
export class PowerOffDialog {

  constructor(
    public http: HttpClient,
    public dialogRef: MatDialogRef&lt;PowerOffDialog&gt;,
    private toastr: ToastrService
  ) { }

  onNoClick(): void {
    this.dialogRef.close(false);
  }
  /**
  * Sends shutdown request to backend,
  */
  onYesClick(): void {
    this.http.get(AppConfig.apiUrl + &quot;/shutdown&quot;, { responseType: &#x27;text&#x27; })
      .subscribe(
        (val) &#x3D;&gt; {
          this.toastr.success(&#x27;Powering Off&#x27;);
          this.dialogRef.close(true);
        },
        response &#x3D;&gt; {
          this.toastr.error(response, &quot;Error&quot;);
          this.dialogRef.close(false);
        });
  }
}
</code></pre>
    </div>
</div>






                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'ROUTE.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
